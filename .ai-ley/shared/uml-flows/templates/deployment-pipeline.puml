@startuml DeploymentPipeline
title "ğŸš€ Deployment Pipeline - Full CI/CD Workflow"

' Description: Complete deployment pipeline with testing, building, and rollback capabilities
' Author: AI-LEY Community
' Tags: deployment, ci-cd, automation, production

start
:ğŸ“¥ Pull latest code;
note right
  Command: git pull origin main
  Directory: /project/root
  Timeout: 60s
end note

if (ğŸ” Code quality check?) then (pass)
  :ğŸ§ª Run unit tests;
  note right
    Command: npm test
    Timeout: 300s
  end note
  
  if (âœ… All tests pass?) then (yes)
    :ğŸ“¦ Build application;
    note right
      Command: npm run build
      Timeout: 600s
    end note
    
    :ğŸš€ Deploy to staging;
    note right
      Command: npm run deploy:staging
      Environment: staging
    end note
    
    :ğŸ” Health check staging;
    note right
      Command: curl -f https://staging.app.com/health
      Timeout: 30s
    end note
    
    if (ğŸ’š Staging healthy?) then (yes)
      :ğŸ‰ Deploy to production;
      note right
        Command: npm run deploy:production
        Environment: production
      end note
      
      :ğŸ“§ Notify team of success;
      note right
        API: POST /api/notifications
        Message: Deployment successful
      end note
      
    else (no)
      :ğŸ”„ Rollback staging;
      :ğŸš¨ Alert DevOps team;
    endif
    
  else (no)
    :âŒ Report test failures;
    note right
      Command: npm run test:report
      API: POST /api/test-reports
    end note
    
    :ğŸ“Š Generate test coverage;
  endif
  
else (fail)
  :ğŸš« Block deployment;
  :ğŸ“‹ Create quality report;
endif

stop
@enduml
